var e=Object.defineProperty,t=(t,a,s)=>((t,a,s)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[a]=s)(t,"symbol"!=typeof a?a+"":a,s);import{j as a,C as s,P as r,S as n}from"./ui-core-chunk-SlRej_pG.js";import{c as o,a as i,e as l,R as d,u as c,B as u,d as m,f as h}from"./vendor-chunk-GY-y1GfF.js";import{t as g,c as p,a as f,S as x,M as v,P as b,H as w,b as y,d as k,e as N,C as j,T as C,U as E,f as T,g as S,h as R,D as M,L as z}from"./utils-chunk-BsUwtO6c.js";import{Q as B,a as I}from"./backend-chunk-1-2iSslP.js";import{E as D,h as $,a as P,I as F,n as A}from"./fabric-chunk-DmRvy6t_.js";import{_ as L}from"./ai-chunk-BC_U1pmo.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var O,U={};var W=function(){if(O)return U;O=1;var e=o();return U.createRoot=e.createRoot,U.hydrateRoot=e.hydrateRoot,U}(),q=["light","dark"],Y=i.createContext(void 0),H={setTheme:e=>{},themes:[]};i.memo(({forcedTheme:e,storageKey:t,attribute:a,enableSystem:s,enableColorScheme:r,defaultTheme:n,value:o,attrs:l,nonce:d})=>{let c="system"===n,u="class"===a?`var d=document.documentElement,c=d.classList;c.remove(${l.map(e=>`'${e}'`).join(",")});`:`var d=document.documentElement,n='${a}',s='setAttribute';`,m=r?q.includes(n)&&n?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${n}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",h=(e,t=!1,s=!0)=>{let n=o?o[e]:e,i=t?e+"|| ''":`'${n}'`,l="";return r&&s&&!t&&q.includes(e)&&(l+=`d.style.colorScheme = '${e}';`),"class"===a?l+=t||n?`c.add(${i})`:"null":n&&(l+=`d[s](n,${i})`),l},g=e?`!function(){${u}${h(e)}}()`:s?`!function(){try{${u}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${c})){var t='(prefers-color-scheme: dark)',m=window.matchMedia(t);if(m.media!==t||m.matches){${h("dark")}}else{${h("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${h(o?"x[e]":"e",!0)}}${c?"":"else{"+h(n,!1,!1)+"}"}${m}}catch(e){}}()`:`!function(){try{${u}var e=localStorage.getItem('${t}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${h(o?"x[e]":"e",!0)}}else{${h(n,!1,!1)};}${m}}catch(t){}}();`;return i.createElement("script",{nonce:d,dangerouslySetInnerHTML:{__html:g}})});var _=Array(12).fill(0),Q=({visible:e})=>l.createElement("div",{className:"sonner-loading-wrapper","data-visible":e},l.createElement("div",{className:"sonner-spinner"},_.map((e,t)=>l.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${t}`})))),V=l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},l.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),X=l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},l.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),K=l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},l.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),J=l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},l.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),G=1,Z=new class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:a,...s}=e,r="number"==typeof(null==e?void 0:e.id)||(null==(t=e.id)?void 0:t.length)>0?e.id:G++,n=this.toasts.find(e=>e.id===r),o=void 0===e.dismissible||e.dismissible;return n?this.toasts=this.toasts.map(t=>t.id===r?(this.publish({...t,...e,id:r,title:a}),{...t,...e,id:r,dismissible:o,title:a}):t):this.addToast({title:a,...s,dismissible:o,id:r}),r},this.dismiss=e=>(e||this.toasts.forEach(e=>{this.subscribers.forEach(t=>t({id:e.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let a;void 0!==t.loading&&(a=this.create({...t,promise:e,type:"loading",message:t.loading,description:"function"!=typeof t.description?t.description:void 0}));let s=e instanceof Promise?e:e(),r=void 0!==a;return s.then(async e=>{if(ee(e)&&!e.ok){r=!1;let s="function"==typeof t.error?await t.error(`HTTP error! status: ${e.status}`):t.error,n="function"==typeof t.description?await t.description(`HTTP error! status: ${e.status}`):t.description;this.create({id:a,type:"error",message:s,description:n})}else if(void 0!==t.success){r=!1;let s="function"==typeof t.success?await t.success(e):t.success,n="function"==typeof t.description?await t.description(e):t.description;this.create({id:a,type:"success",message:s,description:n})}}).catch(async e=>{if(void 0!==t.error){r=!1;let s="function"==typeof t.error?await t.error(e):t.error,n="function"==typeof t.description?await t.description(e):t.description;this.create({id:a,type:"error",message:s,description:n})}}).finally(()=>{var e;r&&(this.dismiss(a),a=void 0),null==(e=t.finally)||e.call(t)}),a},this.custom=(e,t)=>{let a=(null==t?void 0:t.id)||G++;return this.create({jsx:e(a),id:a,...t}),a},this.subscribers=[],this.toasts=[]}},ee=e=>e&&"object"==typeof e&&"ok"in e&&"boolean"==typeof e.ok&&"status"in e&&"number"==typeof e.status,te=(e,t)=>{let a=(null==t?void 0:t.id)||G++;return Z.addToast({title:e,...t,id:a}),a},ae=Object.assign(te,{success:Z.success,info:Z.info,warning:Z.warning,error:Z.error,custom:Z.custom,message:Z.message,promise:Z.promise,dismiss:Z.dismiss,loading:Z.loading},{getHistory:()=>Z.toasts});function se(e){return void 0!==e.label}!function(e,{insertAt:t}={}){if("undefined"==typeof document)return;let a=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css","top"===t&&a.firstChild?a.insertBefore(s,a.firstChild):a.appendChild(s),s.styleSheet?s.styleSheet.cssText=e:s.appendChild(document.createTextNode(e))}(':where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}:where([data-sonner-toaster][data-x-position="right"]){right:max(var(--offset),env(safe-area-inset-right))}:where([data-sonner-toaster][data-x-position="left"]){left:max(var(--offset),env(safe-area-inset-left))}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:max(var(--offset),env(safe-area-inset-top))}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:max(var(--offset),env(safe-area-inset-bottom))}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:0;right:0;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}\n');var re=3,ne=14;function oe(...e){return e.filter(Boolean).join(" ")}var ie=e=>{var t,a,s,r,n,o,i,d,c,u;let{invert:m,toast:h,unstyled:g,interacting:p,setHeights:f,visibleToasts:x,heights:v,index:b,toasts:w,expanded:y,removeToast:k,defaultRichColors:N,closeButton:j,style:C,cancelButtonStyle:E,actionButtonStyle:T,className:S="",descriptionClassName:R="",duration:M,position:z,gap:B,loadingIcon:I,expandByDefault:D,classNames:$,icons:P,closeButtonAriaLabel:F="Close toast",pauseWhenPageIsHidden:A,cn:L}=e,[O,U]=l.useState(!1),[W,q]=l.useState(!1),[Y,H]=l.useState(!1),[_,G]=l.useState(!1),[Z,ee]=l.useState(0),[te,ae]=l.useState(0),re=l.useRef(null),ne=l.useRef(null),oe=0===b,ie=b+1<=x,le=h.type,de=!1!==h.dismissible,ce=h.className||"",ue=h.descriptionClassName||"",me=l.useMemo(()=>v.findIndex(e=>e.toastId===h.id)||0,[v,h.id]),he=l.useMemo(()=>{var e;return null!=(e=h.closeButton)?e:j},[h.closeButton,j]),ge=l.useMemo(()=>h.duration||M||4e3,[h.duration,M]),pe=l.useRef(0),fe=l.useRef(0),xe=l.useRef(0),ve=l.useRef(null),[be,we]=z.split("-"),ye=l.useMemo(()=>v.reduce((e,t,a)=>a>=me?e:e+t.height,0),[v,me]),ke=(()=>{let[e,t]=l.useState(document.hidden);return l.useEffect(()=>{let e=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",e),()=>window.removeEventListener("visibilitychange",e)},[]),e})(),Ne=h.invert||m,je="loading"===le;fe.current=l.useMemo(()=>me*B+ye,[me,ye]),l.useEffect(()=>{U(!0)},[]),l.useLayoutEffect(()=>{if(!O)return;let e=ne.current,t=e.style.height;e.style.height="auto";let a=e.getBoundingClientRect().height;e.style.height=t,ae(a),f(e=>e.find(e=>e.toastId===h.id)?e.map(e=>e.toastId===h.id?{...e,height:a}:e):[{toastId:h.id,height:a,position:h.position},...e])},[O,h.title,h.description,f,h.id]);let Ce=l.useCallback(()=>{q(!0),ee(fe.current),f(e=>e.filter(e=>e.toastId!==h.id)),setTimeout(()=>{k(h)},200)},[h,k,f,fe]);return l.useEffect(()=>{if(h.promise&&"loading"===le||h.duration===1/0||"loading"===h.type)return;let e,t=ge;return y||p||A&&ke?(()=>{if(xe.current<pe.current){let e=(new Date).getTime()-pe.current;t-=e}xe.current=(new Date).getTime()})():t!==1/0&&(pe.current=(new Date).getTime(),e=setTimeout(()=>{var e;null==(e=h.onAutoClose)||e.call(h,h),Ce()},t)),()=>clearTimeout(e)},[y,p,D,h,ge,Ce,h.promise,le,A,ke]),l.useEffect(()=>{let e=ne.current;if(e){let t=e.getBoundingClientRect().height;return ae(t),f(e=>[{toastId:h.id,height:t,position:h.position},...e]),()=>f(e=>e.filter(e=>e.toastId!==h.id))}},[f,h.id]),l.useEffect(()=>{h.delete&&Ce()},[Ce,h.delete]),l.createElement("li",{"aria-live":h.important?"assertive":"polite","aria-atomic":"true",role:"status",tabIndex:0,ref:ne,className:L(S,ce,null==$?void 0:$.toast,null==(t=null==h?void 0:h.classNames)?void 0:t.toast,null==$?void 0:$.default,null==$?void 0:$[le],null==(a=null==h?void 0:h.classNames)?void 0:a[le]),"data-sonner-toast":"","data-rich-colors":null!=(s=h.richColors)?s:N,"data-styled":!(h.jsx||h.unstyled||g),"data-mounted":O,"data-promise":!!h.promise,"data-removed":W,"data-visible":ie,"data-y-position":be,"data-x-position":we,"data-index":b,"data-front":oe,"data-swiping":Y,"data-dismissible":de,"data-type":le,"data-invert":Ne,"data-swipe-out":_,"data-expanded":!!(y||D&&O),style:{"--index":b,"--toasts-before":b,"--z-index":w.length-b,"--offset":`${W?Z:fe.current}px`,"--initial-height":D?"auto":`${te}px`,...C,...h.style},onPointerDown:e=>{je||!de||(re.current=new Date,ee(fe.current),e.target.setPointerCapture(e.pointerId),"BUTTON"!==e.target.tagName&&(H(!0),ve.current={x:e.clientX,y:e.clientY}))},onPointerUp:()=>{var e,t,a,s;if(_||!de)return;ve.current=null;let r=Number((null==(e=ne.current)?void 0:e.style.getPropertyValue("--swipe-amount").replace("px",""))||0),n=(new Date).getTime()-(null==(t=re.current)?void 0:t.getTime()),o=Math.abs(r)/n;if(Math.abs(r)>=20||o>.11)return ee(fe.current),null==(a=h.onDismiss)||a.call(h,h),Ce(),void G(!0);null==(s=ne.current)||s.style.setProperty("--swipe-amount","0px"),H(!1)},onPointerMove:e=>{var t;if(!ve.current||!de)return;let a=e.clientY-ve.current.y,s=e.clientX-ve.current.x,r=("top"===be?Math.min:Math.max)(0,a),n="touch"===e.pointerType?10:2;Math.abs(r)>n?null==(t=ne.current)||t.style.setProperty("--swipe-amount",`${a}px`):Math.abs(s)>n&&(ve.current=null)}},he&&!h.jsx?l.createElement("button",{"aria-label":F,"data-disabled":je,"data-close-button":!0,onClick:je||!de?()=>{}:()=>{var e;Ce(),null==(e=h.onDismiss)||e.call(h,h)},className:L(null==$?void 0:$.closeButton,null==(r=null==h?void 0:h.classNames)?void 0:r.closeButton)},l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},l.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),l.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))):null,h.jsx||l.isValidElement(h.title)?h.jsx||h.title:l.createElement(l.Fragment,null,le||h.icon||h.promise?l.createElement("div",{"data-icon":"",className:L(null==$?void 0:$.icon,null==(n=null==h?void 0:h.classNames)?void 0:n.icon)},h.promise||"loading"===h.type&&!h.icon?h.icon||(null!=P&&P.loading?l.createElement("div",{className:"sonner-loader","data-visible":"loading"===le},P.loading):I?l.createElement("div",{className:"sonner-loader","data-visible":"loading"===le},I):l.createElement(Q,{visible:"loading"===le})):null,"loading"!==h.type?h.icon||(null==P?void 0:P[le])||(e=>{switch(e){case"success":return V;case"info":return K;case"warning":return X;case"error":return J;default:return null}})(le):null):null,l.createElement("div",{"data-content":"",className:L(null==$?void 0:$.content,null==(o=null==h?void 0:h.classNames)?void 0:o.content)},l.createElement("div",{"data-title":"",className:L(null==$?void 0:$.title,null==(i=null==h?void 0:h.classNames)?void 0:i.title)},h.title),h.description?l.createElement("div",{"data-description":"",className:L(R,ue,null==$?void 0:$.description,null==(d=null==h?void 0:h.classNames)?void 0:d.description)},h.description):null),l.isValidElement(h.cancel)?h.cancel:h.cancel&&se(h.cancel)?l.createElement("button",{"data-button":!0,"data-cancel":!0,style:h.cancelButtonStyle||E,onClick:e=>{var t,a;se(h.cancel)&&de&&(null==(a=(t=h.cancel).onClick)||a.call(t,e),Ce())},className:L(null==$?void 0:$.cancelButton,null==(c=null==h?void 0:h.classNames)?void 0:c.cancelButton)},h.cancel.label):null,l.isValidElement(h.action)?h.action:h.action&&se(h.action)?l.createElement("button",{"data-button":!0,"data-action":!0,style:h.actionButtonStyle||T,onClick:e=>{var t,a;se(h.action)&&(e.defaultPrevented||(null==(a=(t=h.action).onClick)||a.call(t,e),Ce()))},className:L(null==$?void 0:$.actionButton,null==(u=null==h?void 0:h.classNames)?void 0:u.actionButton)},h.action.label):null))};function le(){if("undefined"==typeof window||"undefined"==typeof document)return"ltr";let e=document.documentElement.getAttribute("dir");return"auto"!==e&&e?e:window.getComputedStyle(document.documentElement).direction}var de=e=>{let{invert:t,position:a="bottom-right",hotkey:s=["altKey","KeyT"],expand:r,closeButton:n,className:o,offset:i,theme:c="light",richColors:u,duration:m,style:h,visibleToasts:g=re,toastOptions:p,dir:f=le(),gap:x=ne,loadingIcon:v,icons:b,containerAriaLabel:w="Notifications",pauseWhenPageIsHidden:y,cn:k=oe}=e,[N,j]=l.useState([]),C=l.useMemo(()=>Array.from(new Set([a].concat(N.filter(e=>e.position).map(e=>e.position)))),[N,a]),[E,T]=l.useState([]),[S,R]=l.useState(!1),[M,z]=l.useState(!1),[B,I]=l.useState("system"!==c?c:"undefined"!=typeof window&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),D=l.useRef(null),$=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),P=l.useRef(null),F=l.useRef(!1),A=l.useCallback(e=>{var t;null!=(t=N.find(t=>t.id===e.id))&&t.delete||Z.dismiss(e.id),j(t=>t.filter(({id:t})=>t!==e.id))},[N]);return l.useEffect(()=>Z.subscribe(e=>{e.dismiss?j(t=>t.map(t=>t.id===e.id?{...t,delete:!0}:t)):setTimeout(()=>{d.flushSync(()=>{j(t=>{let a=t.findIndex(t=>t.id===e.id);return-1!==a?[...t.slice(0,a),{...t[a],...e},...t.slice(a+1)]:[e,...t]})})})}),[]),l.useEffect(()=>{"system"===c?("system"===c&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?I("dark"):I("light")),"undefined"!=typeof window&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:e})=>{I(e?"dark":"light")})):I(c)},[c]),l.useEffect(()=>{N.length<=1&&R(!1)},[N]),l.useEffect(()=>{let e=e=>{var t,a;s.every(t=>e[t]||e.code===t)&&(R(!0),null==(t=D.current)||t.focus()),"Escape"===e.code&&(document.activeElement===D.current||null!=(a=D.current)&&a.contains(document.activeElement))&&R(!1)};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[s]),l.useEffect(()=>{if(D.current)return()=>{P.current&&(P.current.focus({preventScroll:!0}),P.current=null,F.current=!1)}},[D.current]),N.length?l.createElement("section",{"aria-label":`${w} ${$}`,tabIndex:-1},C.map((e,a)=>{var s;let[d,c]=e.split("-");return l.createElement("ol",{key:e,dir:"auto"===f?le():f,tabIndex:-1,ref:D,className:o,"data-sonner-toaster":!0,"data-theme":B,"data-y-position":d,"data-x-position":c,style:{"--front-toast-height":`${(null==(s=E[0])?void 0:s.height)||0}px`,"--offset":"number"==typeof i?`${i}px`:i||"32px","--width":"356px","--gap":`${x}px`,...h},onBlur:e=>{F.current&&!e.currentTarget.contains(e.relatedTarget)&&(F.current=!1,P.current&&(P.current.focus({preventScroll:!0}),P.current=null))},onFocus:e=>{e.target instanceof HTMLElement&&"false"===e.target.dataset.dismissible||F.current||(F.current=!0,P.current=e.relatedTarget)},onMouseEnter:()=>R(!0),onMouseMove:()=>R(!0),onMouseLeave:()=>{M||R(!1)},onPointerDown:e=>{e.target instanceof HTMLElement&&"false"===e.target.dataset.dismissible||z(!0)},onPointerUp:()=>z(!1)},N.filter(t=>!t.position&&0===a||t.position===e).map((a,s)=>{var o,i;return l.createElement(ie,{key:a.id,icons:b,index:s,toast:a,defaultRichColors:u,duration:null!=(o=null==p?void 0:p.duration)?o:m,className:null==p?void 0:p.className,descriptionClassName:null==p?void 0:p.descriptionClassName,invert:t,visibleToasts:g,closeButton:null!=(i=null==p?void 0:p.closeButton)?i:n,interacting:M,position:e,style:null==p?void 0:p.style,unstyled:null==p?void 0:p.unstyled,classNames:null==p?void 0:p.classNames,cancelButtonStyle:null==p?void 0:p.cancelButtonStyle,actionButtonStyle:null==p?void 0:p.actionButtonStyle,removeToast:A,toasts:N.filter(e=>e.position==a.position),heights:E.filter(e=>e.position==a.position),setHeights:T,expandByDefault:r,gap:x,loadingIcon:v,expanded:S,pauseWhenPageIsHidden:y,cn:k})}))})):null};const ce=({...e})=>{const{theme:t="system"}=null!=(s=i.useContext(Y))?s:H;var s;return a.jsx(de,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};function ue(...e){return g(p(e))}const me=r;i.forwardRef(({className:e,sideOffset:t=4,...r},n)=>a.jsx(s,{ref:n,sideOffset:t,className:ue("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})).displayName=s.displayName;const he=f("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",gradient:"bg-gradient-primary text-white shadow-glow hover:scale-105 transform transition-all duration-200",creative:"bg-gradient-secondary text-white hover:shadow-glow transition-all duration-300",tool:"bg-card border border-border hover:bg-accent hover:text-accent-foreground data-[state=on]:bg-primary data-[state=on]:text-primary-foreground"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),ge=i.forwardRef(({className:e,variant:t,size:s,asChild:r=!1,...o},i)=>{const l=r?n:"button";return a.jsx(l,{className:ue(he({variant:t,size:s,className:e})),ref:i,...o})});ge.displayName="Button";const pe=i.forwardRef(({className:e,...t},s)=>a.jsx("div",{ref:s,className:ue("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));pe.displayName="Card";i.forwardRef(({className:e,...t},s)=>a.jsx("div",{ref:s,className:ue("flex flex-col space-y-1.5 p-6",e),...t})).displayName="CardHeader";i.forwardRef(({className:e,...t},s)=>a.jsx("h3",{ref:s,className:ue("text-2xl font-semibold leading-none tracking-tight",e),...t})).displayName="CardTitle";i.forwardRef(({className:e,...t},s)=>a.jsx("p",{ref:s,className:ue("text-sm text-muted-foreground",e),...t})).displayName="CardDescription";i.forwardRef(({className:e,...t},s)=>a.jsx("div",{ref:s,className:ue("p-6 pt-0",e),...t})).displayName="CardContent";i.forwardRef(({className:e,...t},s)=>a.jsx("div",{ref:s,className:ue("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter";const fe=()=>{const e=c();return a.jsxs(pe,{className:"border-0 rounded-none bg-gradient-primary shadow-elegant",children:[a.jsxs("div",{className:"flex items-center justify-between p-4",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("img",{src:"/lovable-uploads/ef91a049-994d-408f-b928-9a384a9b9da2.png",alt:"don.ai logo",className:"h-8 w-8"}),a.jsx("h1",{className:"text-2xl font-bold text-white",children:"don.ai"})]}),a.jsx("div",{className:"hidden md:flex items-center gap-2 text-white/80 text-sm",children:a.jsx("span",{children:"Creative Suite"})})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ge,{variant:"ghost",size:"icon",className:"text-white hover:bg-white/10",children:a.jsx(x,{className:"h-5 w-5"})}),a.jsx(ge,{variant:"ghost",size:"icon",className:"text-white hover:bg-white/10 md:hidden",children:a.jsx(v,{className:"h-5 w-5"})})]})]}),a.jsx("div",{className:"border-t border-white/10 py-2",children:a.jsxs("div",{className:"container flex h-14 items-center",children:[a.jsx("div",{className:"mr-4 flex",children:a.jsxs("a",{className:"mr-6 flex items-center space-x-2",href:"/",children:[a.jsx(b,{className:"h-6 w-6"}),a.jsx("span",{className:"hidden font-bold sm:inline-block",children:"Don.ai"})]})}),a.jsx("div",{className:"flex flex-1 items-center justify-between space-x-2 md:justify-end",children:a.jsxs("nav",{className:"flex items-center space-x-6",children:[a.jsxs(ge,{variant:"ghost",size:"sm",onClick:()=>e("/"),className:"flex items-center space-x-2",children:[a.jsx(w,{className:"h-4 w-4"}),a.jsx("span",{children:"Home"})]}),a.jsxs(ge,{variant:"ghost",size:"sm",onClick:()=>e("/editor"),className:"flex items-center space-x-2",children:[a.jsx(b,{className:"h-4 w-4"}),a.jsx("span",{children:"Editor"})]})]})})]})})]})},xe=({color:e,onChange:t})=>{const[s,r]=i.useState(!1);return a.jsx(pe,{className:"p-2",children:a.jsxs("div",{className:"flex gap-2 items-center",children:[a.jsxs(ge,{variant:"tool",size:"icon",onClick:()=>r(!s),className:"relative",children:[a.jsx(b,{className:"h-4 w-4"}),a.jsx("div",{className:"absolute bottom-1 right-1 w-2 h-2 rounded-full border border-white",style:{backgroundColor:e}})]}),s&&a.jsxs("div",{className:"flex gap-1 p-2 bg-card border border-border rounded-lg shadow-elegant",children:[["#8B5CF6","#06B6D4","#F59E0B","#EF4444","#10B981","#8B5A2B","#6B7280","#1F2937","#FFFFFF","#000000"].map(s=>a.jsx("button",{className:"w-6 h-6 rounded border-2 hover:scale-110 transition-all duration-200 "+(e===s?"border-primary ring-2 ring-primary/30":"border-gray-300"),style:{backgroundColor:s},onClick:()=>t(s),title:s},s)),a.jsx("input",{type:"color",value:e,onChange:e=>t(e.target.value),className:"w-6 h-6 rounded border-2 border-gray-300 cursor-pointer hover:scale-110 transition-all duration-200",title:"Custom color"})]})]})})},ve=({activeTool:e,onToolClick:t,onClear:s,onExport:r,onImageUpload:n,onBackgroundRemove:o,onUndo:i,isProcessing:l})=>{const d=[{id:"select",icon:y,label:"Select"},{id:"draw",icon:k,label:"Draw"},{id:"rectangle",icon:N,label:"Rectangle"},{id:"circle",icon:j,label:"Circle"},{id:"text",icon:C,label:"Text"}];return a.jsx(pe,{className:"p-2",children:a.jsxs("div",{className:"flex gap-2 items-center",children:[d.map(s=>{const r=s.icon;return a.jsx(ge,{variant:e===s.id?"default":"tool",size:"icon",onClick:()=>t(s.id),title:s.label,className:"transition-all duration-200",children:a.jsx(r,{className:"h-4 w-4"})},s.id)}),a.jsx("div",{className:"w-px h-6 bg-border mx-2"}),a.jsx(ge,{variant:"secondary",size:"icon",onClick:n,title:"Upload Image",children:a.jsx(E,{className:"h-4 w-4"})}),a.jsx(ge,{variant:"creative",size:"icon",onClick:o,title:"Remove Background",disabled:l,children:a.jsx(T,{className:"h-4 w-4"})}),a.jsx(ge,{variant:"outline",size:"icon",onClick:i,title:"Undo",children:a.jsx(S,{className:"h-4 w-4"})}),a.jsx(ge,{variant:"outline",size:"icon",onClick:s,title:"Clear Canvas",className:"hover:bg-destructive hover:text-destructive-foreground",children:a.jsx(R,{className:"h-4 w-4"})}),a.jsx(ge,{variant:"gradient",size:"icon",onClick:r,title:"Export Design",children:a.jsx(M,{className:"h-4 w-4"})})]})})};L.allowLocalModels=!1,L.allowRemoteModels=!0;const be=e=>new Promise((t,a)=>{const s=new Image;s.onload=()=>{URL.revokeObjectURL(s.src),t(s)},s.onerror=e=>{URL.revokeObjectURL(s.src),a(e)},s.src=URL.createObjectURL(e)});class we{constructor(e,a,s=10){t(this,"pool",[]),t(this,"createFn"),t(this,"resetFn"),this.createFn=e,this.resetFn=a;for(let t=0;t<s;t++)this.pool.push(this.createFn())}acquire(){return this.pool.pop()||this.createFn()}release(e){this.resetFn(e),this.pool.push(e)}clear(){this.pool.length=0}get size(){return this.pool.length}}class ye{constructor(e){t(this,"running",0),t(this,"queue",[]),this.concurrency=e}async add(e){return new Promise((t,a)=>{this.queue.push(async()=>{try{const a=await e();t(a)}catch(s){a(s)}}),this.tryNext()})}async tryNext(){if(this.running>=this.concurrency||0===this.queue.length)return;this.running++;const e=this.queue.shift();try{await e()}finally{this.running--,this.tryNext()}}get stats(){return{running:this.running,queued:this.queue.length,concurrency:this.concurrency}}}class ke{constructor(e=navigator.hardwareConcurrency||4){t(this,"workers",[]),t(this,"taskQueue",[]),t(this,"activeTasks",new Map),t(this,"resultCallbacks",new Map),t(this,"workerCount"),this.workerCount=Math.min(e,8),this.initializeWorkers()}initializeWorkers(){for(let t=0;t<this.workerCount;t++)try{const e=new Worker(new URL("/don-create-code/assets/parallel-worker-DglAoJtd.js",import.meta.url),{type:"module"});e.onmessage=e=>{this.handleWorkerMessage(e.data)},e.onerror=e=>{console.error(`Worker ${t} error:`,e)},this.workers.push(e)}catch(e){console.warn("Failed to create worker:",e)}}handleWorkerMessage(e){const{id:t,result:a,error:s,processingTime:r}=e,n=this.resultCallbacks.get(t);n&&(n({id:t,result:a,error:s,processingTime:r}),this.resultCallbacks.delete(t),this.activeTasks.delete(t)),this.processNextTask()}processNextTask(){if(0===this.taskQueue.length)return;const e=this.workers.find(e=>!Array.from(this.activeTasks.values()).some(t=>t.id===e.toString()));if(e){this.taskQueue.sort((e,t)=>{const a={high:3,medium:2,low:1};return a[t.priority]-a[e.priority]});const t=this.taskQueue.shift();t&&(this.activeTasks.set(t.id,t),e.postMessage(t))}}executeTask(e,t,a="medium"){return new Promise((s,r)=>{const n=`task_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,o={id:n,data:t,type:e,priority:a};this.resultCallbacks.set(n,e=>{e.error?r(new Error(e.error)):s(e.result)}),this.taskQueue.push(o),this.processNextTask()})}async executeBatch(e){const t=e.map(e=>this.executeTask(e.type,e.data,e.priority));return Promise.all(t)}dispose(){this.workers.forEach(e=>{e.terminate()}),this.workers=[],this.taskQueue=[],this.activeTasks.clear(),this.resultCallbacks.clear()}}new ke,new class{constructor(){t(this,"taskManager"),this.taskManager=new ke}async processImagesInParallel(e){const t=e.map(e=>({type:"image-processing",data:{imageData:this.imageToImageData(e),operation:"background-removal"},priority:"high"}));return this.taskManager.executeBatch(t)}async optimizeImagesInParallel(e,t){const a=e.map(e=>({type:"image-processing",data:{imageData:this.imageToImageData(e),operation:"resize-optimize",options:t},priority:"medium"}));return this.taskManager.executeBatch(a)}imageToImageData(e){const t=document.createElement("canvas"),a=t.getContext("2d");return t.width=e.width,t.height=e.height,a.drawImage(e,0,0),a.getImageData(0,0,t.width,t.height)}dispose(){this.taskManager.dispose()}},new class{constructor(){t(this,"taskManager"),this.taskManager=new ke}async processCanvasOperations(e,t){const a=e.map((e,a)=>({type:"canvas-optimization",data:{imageData:e,operation:t[a]||t[0]},priority:"high"}));return this.taskManager.executeBatch(a)}async renderShapesInParallel(e){const t=e.map(e=>({type:"canvas-optimization",data:{shape:e,operation:"render-shape"},priority:"medium"}));return this.taskManager.executeBatch(t)}dispose(){this.taskManager.dispose()}};const Ne=new class{constructor(e=navigator.hardwareConcurrency||4){t(this,"workers",[]),t(this,"workerQueue",[]),t(this,"pendingTasks",new Map),t(this,"maxWorkers"),this.maxWorkers=Math.min(e,8),this.initializeWorkers()}initializeWorkers(){for(let e=0;e<this.maxWorkers;e++)this.createWorker()}createWorker(){const e=new Worker("/background-worker.js");return e.onmessage=t=>{const a=t.data,s=this.pendingTasks.get(a.id);s&&(clearTimeout(s.timeout),this.pendingTasks.delete(a.id),a.success?s.resolve(a.data):s.reject(new Error(a.error||"Worker task failed"))),this.workerQueue.push(e)},e.onerror=t=>{console.error("Worker error:",t);const a=this.workers.indexOf(e);a>-1&&(this.workers.splice(a,1),this.createWorker())},this.workers.push(e),this.workerQueue.push(e),e}async executeTask(e,t,a=3e4){return new Promise((s,r)=>{const n=crypto.randomUUID(),o=setTimeout(()=>{this.pendingTasks.delete(n),r(new Error(`Worker task ${e} timed out after ${a}ms`))},a);this.pendingTasks.set(n,{resolve:s,reject:r,timeout:o});const i=this.getAvailableWorker();if(!i)return clearTimeout(o),this.pendingTasks.delete(n),void r(new Error("No available workers"));const l={id:n,type:e,payload:t};i.postMessage(l)})}getAvailableWorker(){return this.workerQueue.shift()||null}async removeBackground(e){return this.executeTask("BACKGROUND_REMOVAL",e)}async processImage(e,t){const a={imageData:e,operation:t};return this.executeTask("IMAGE_PROCESSING",a)}async exportCanvas(e,t){const a={canvasData:e,format:t};return this.executeTask("CANVAS_EXPORT",a)}async processAI(e){return this.executeTask("AI_PROCESSING",e)}async batchProcess(e){const t=e.map(e=>this.executeTask(e.type,e.payload));return Promise.all(t)}getStats(){return{totalWorkers:this.workers.length,availableWorkers:this.workerQueue.length,busyWorkers:this.workers.length-this.workerQueue.length,pendingTasks:this.pendingTasks.size,maxWorkers:this.maxWorkers}}terminate(){this.workers.forEach(e=>e.terminate()),this.workers=[],this.workerQueue=[],this.pendingTasks.forEach(({reject:e,timeout:t})=>{clearTimeout(t),e(new Error("WorkerManager terminated"))}),this.pendingTasks.clear()}},je={maxFileSize:10485760,allowedFileTypes:["image/jpeg","image/png","image/webp","image/gif"],maxImageDimensions:{width:4096,height:4096},enableCSP:!0,rateLimitRequests:100};class Ce{static sanitizeString(e){if("string"!=typeof e)return"";let t=e;return this.XSS_PATTERNS.forEach(e=>{t=t.replace(e,"")}),t=t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;"),t.trim()}static sanitizeFileName(e){if("string"!=typeof e)return"unnamed_file";let t=e.replace(/[^a-zA-Z0-9._-]/g,"_");if(t=t.replace(/\.\.+/g,"."),t.length>255){const e=t.split(".").pop();t=t.substring(0,250)+(e?"."+e:"")}return t||"unnamed_file"}static validateEmail(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)&&e.length<=254}static validateURL(e){try{const t=new URL(e);return["http:","https:"].includes(t.protocol)}catch{return!1}}}t(Ce,"XSS_PATTERNS",[/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,/javascript:/gi,/on\w+\s*=/gi,/<iframe\b[^<]*(?:(?!<\/iframe>)<[^<]*)*<\/iframe>/gi,/<object\b[^<]*(?:(?!<\/object>)<[^<]*)*<\/object>/gi,/<embed\b[^<]*>/gi,/<link\b[^<]*>/gi,/<meta\b[^<]*>/gi]);class Ee{static validateFile(e,t=je){const a=[];e.size>t.maxFileSize&&a.push(`File size ${(e.size/1024/1024).toFixed(2)}MB exceeds limit of ${t.maxFileSize/1024/1024}MB`),t.allowedFileTypes.includes(e.type)||a.push(`File type ${e.type} not allowed. Allowed types: ${t.allowedFileTypes.join(", ")}`);return Ce.sanitizeFileName(e.name)!==e.name&&a.push("File name contains invalid characters"),{isValid:0===a.length,errors:a}}static async validateImage(e,t=je){const a=this.validateFile(e,t);return a.isValid?new Promise(a=>{const s=new Image,r=[];s.onload=()=>{(s.width>t.maxImageDimensions.width||s.height>t.maxImageDimensions.height)&&r.push(`Image dimensions ${s.width}x${s.height} exceed limit of ${t.maxImageDimensions.width}x${t.maxImageDimensions.height}`);const e=s.width/s.height;(e>10||e<.1)&&r.push("Image aspect ratio is too extreme"),URL.revokeObjectURL(s.src),a({isValid:0===r.length,errors:r})},s.onerror=()=>{URL.revokeObjectURL(s.src),a({isValid:!1,errors:["Invalid image file"]})},s.src=URL.createObjectURL(e)}):a}}const Te=new class{constructor(e=100,a=6e4){t(this,"requests",new Map),t(this,"windowMs"),t(this,"maxRequests"),this.maxRequests=e,this.windowMs=a}isAllowed(e){const t=Date.now(),a=t-this.windowMs;let s=this.requests.get(e)||[];return s=s.filter(e=>e>a),!(s.length>=this.maxRequests)&&(s.push(t),this.requests.set(e,s),!0)}getRemainingRequests(e){const t=Date.now()-this.windowMs,a=(this.requests.get(e)||[]).filter(e=>e>t);return Math.max(0,this.maxRequests-a.length)}reset(e){e?this.requests.delete(e):this.requests.clear()}},Se=new we(()=>new D({width:100,height:100}),e=>{e.set({width:100,height:100,fill:"blue"})}),Re=new we(()=>new $({radius:50}),e=>{e.set({radius:50,fill:"red"})}),Me=new we(()=>new P("Sample Text"),e=>{e.set({text:"Sample Text",fontSize:20})}),ze=()=>{const e=i.useRef(null),[t,s]=i.useState(null),[r,n]=i.useState("#8B5CF6"),[o,l]=i.useState("select"),[d,c]=i.useState(!1),[u,m]=i.useState([]),[h,g]=i.useState(0),p=i.useRef(null);i.useMemo(()=>new ye(4),[]);const f=i.useRef({lastTime:performance.now(),frameCount:0,measureFPS:function(){this.frameCount++;const e=performance.now();if(e-this.lastTime>=1e3){const t=Math.round(1e3*this.frameCount/(e-this.lastTime));return this.frameCount=0,this.lastTime=e,t}return 0}}),x=function(e,t){const a=i.useRef();return i.useCallback((...s)=>{a.current&&clearTimeout(a.current),a.current=setTimeout(()=>{e(...s)},t)},[e,t])}(e=>{y(e)},300),v=function(e,t){const a=i.useRef(Date.now());return i.useCallback((...s)=>{Date.now()-a.current>=t&&(e(...s),a.current=Date.now())},[e,t])}(()=>{t&&t.renderAll()},16),b=i.useMemo(()=>({width:800,height:600,backgroundColor:"#ffffff",preserveObjectStacking:!0,selection:!0,skipTargetFind:!1,perPixelTargetFind:!0}),[]);i.useEffect(()=>{if(!e.current)return;const t=new F(e.current,b);t.selection=!0,t.preserveObjectStacking=!0,t.isDrawingMode=!1,t.freeDrawingBrush&&(t.freeDrawingBrush.color=r,t.freeDrawingBrush.width=3);const a=()=>{const e=f.current.measureFPS();g(e),requestAnimationFrame(a)};return a(),t.on("object:added",()=>x(t)),t.on("object:removed",()=>x(t)),t.on("object:modified",()=>x(t)),s(t),ae("Canvas ready! Start creating amazing designs!"),y(t),()=>{t.dispose()}},[r,b,x]),i.useEffect(()=>{t&&(t.isDrawingMode="draw"===o,"draw"===o&&t.freeDrawingBrush&&(t.freeDrawingBrush.color=r,t.freeDrawingBrush.width=3))},[o,r,t]);const w=i.useCallback(e=>{if(l(e),t){if("rectangle"===e){let e=Se.acquire();e?e.set({left:100,top:100,fill:r,width:120,height:80}):e=new D({left:100,top:100,fill:r,width:120,height:80,rx:8,ry:8}),t.add(e),t.setActiveObject(e)}else if("circle"===e){let e=Re.acquire();e?e.set({left:100,top:100,fill:r,radius:50}):e=new $({left:100,top:100,fill:r,radius:50}),t.add(e),t.setActiveObject(e)}else if("text"===e){let e=Me.acquire();e?e.set({left:100,top:100,fill:r,text:"Your text here",fontSize:24}):e=new P("Your text here",{left:100,top:100,fill:r,fontSize:24,fontFamily:"Inter, sans-serif"}),t.add(e),t.setActiveObject(e)}v()}},[t,r,v]),y=e=>{if(!e)return;const t=JSON.stringify(e.toObject());m(e=>[...e.slice(-9),t])};return a.jsxs("div",{className:"flex flex-col gap-6 p-6",children:[a.jsxs("div",{className:"flex gap-4 items-center justify-between",children:[a.jsxs("div",{className:"flex gap-4 items-center",children:[a.jsx(ve,{activeTool:o,onToolClick:w,onClear:()=>{t&&(t.clear(),t.backgroundColor="#ffffff",t.renderAll(),m([]),y(t),ae("Canvas cleared! Ready for your next masterpiece!"))},onExport:()=>{if(!t)return;const e=t.toDataURL({format:"png",quality:1,multiplier:1}),a=document.createElement("a");a.download="don-ai-design.png",a.href=e,a.click(),ae("Design exported successfully!")},onImageUpload:()=>{p.current?.click()},onBackgroundRemove:async()=>{const e=t?.getActiveObject();if(e&&"image"===e.type){c(!0);try{const a=e,s=a.getElement();if(!s)throw new Error("No image element found");ae("Processing image with parallel AI processing...");const r=document.createElement("canvas"),n=r.getContext("2d");r.width=s.width,r.height=s.height,n.drawImage(s,0,0);const o=n.getImageData(0,0,r.width,r.height),i=await Ne.removeBackground(o);n.putImageData(i,0,0);const l=await new Promise(e=>{r.toBlob(t=>e(t),"image/png")}),d=await be(l),c=await A.fromURL(d.src);c.set({left:a.left,top:a.top,scaleX:a.scaleX,scaleY:a.scaleY,angle:a.angle}),t?.remove(a),t?.add(c),t?.setActiveObject(c),y(t),ae("Background removed successfully!")}catch(a){console.error("Background removal failed:",a),ae("Failed to remove background. Please try again.")}finally{c(!1)}}else ae("Please select an image first!")},onUndo:()=>{if(!t||u.length<=1)return;const e=u.slice(0,-1),a=e[e.length-1];a&&t.loadFromJSON(a,()=>{t.renderAll(),m(e),ae("Undone last action!")})},isProcessing:d}),a.jsx(xe,{color:r,onChange:n})]}),a.jsxs("div",{className:"text-xs text-muted-foreground bg-muted/30 px-3 py-1 rounded-md",children:[a.jsxs("span",{className:"font-mono",children:["FPS: ",h]}),h<30&&h>0&&a.jsx("span",{className:"ml-2 text-yellow-600",children:" Low performance"}),h>=60&&a.jsx("span",{className:"ml-2 text-green-600",children:" Optimal"})]})]}),a.jsx("input",{ref:p,type:"file",accept:"image/*",onChange:async e=>{const a=e.target.files?.[0];if(!a||!t)return;if(!Te.isAllowed("canvas-upload"))return void ae.error("Too many uploads. Please wait before uploading again.");const s=Ee.validateFile(a);if(!s.isValid)return void ae.error(`File validation failed: ${s.errors.join(", ")}`);const r=await Ee.validateImage(a);if(r.isValid)try{c(!0),ae.success("File validation passed. Processing image...");const e=await be(a),s=await A.fromURL(e.src),r=t.width||800,n=t.height||600,o=Math.min(r/s.width,n/s.height,1);s.scale(o),s.set({left:100,top:100}),t.add(s),t.setActiveObject(s),y(t),ae("Image uploaded successfully!")}catch(n){ae("Failed to upload image. Please try again.")}else ae.error(`Image validation failed: ${r.errors.join(", ")}`)},className:"hidden"}),d&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:a.jsx("div",{className:"bg-card p-6 rounded-lg shadow-elegant",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(z,{className:"h-6 w-6 animate-spin text-primary"}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold",children:"Processing Image"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Removing background..."})]})]})})}),a.jsx("div",{className:"flex justify-center",children:a.jsx("div",{className:"bg-card border border-border rounded-lg shadow-elegant overflow-hidden",children:a.jsx("canvas",{ref:e,className:"max-w-full block",style:{display:"block"}})})})]})},Be=()=>{const e=c(),t=()=>{e("/editor")};return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-400 via-pink-500 to-red-500",children:[a.jsx(fe,{}),a.jsxs("div",{className:"container mx-auto px-4 py-8",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h1",{className:"text-4xl font-bold text-white mb-4",children:"Don.ai - Creative Design Suite"}),a.jsx("p",{className:"text-white/90 text-lg",children:"AI-powered design tools for creative professionals"})]}),a.jsx("div",{className:"max-w-4xl mx-auto bg-white/10 backdrop-blur-lg rounded-lg p-6 mb-8",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs(pe,{className:"bg-white/20 rounded-lg p-4 text-center border-0",children:[a.jsx(b,{className:"h-8 w-8 text-white mx-auto mb-2"}),a.jsx("h3",{className:"text-white font-semibold mb-2",children:"Canvas Editor"}),a.jsx("p",{className:"text-white/80 text-sm mb-4",children:"Create with our advanced canvas tools"}),a.jsx(ge,{className:"mt-4",variant:"gradient",onClick:t,children:"Start Creating"})]}),a.jsxs(pe,{className:"bg-white/20 rounded-lg p-4 text-center border-0",children:[a.jsx(T,{className:"h-8 w-8 text-white mx-auto mb-2"}),a.jsx("h3",{className:"text-white font-semibold mb-2",children:"AI Background Removal"}),a.jsx("p",{className:"text-white/80 text-sm mb-4",children:"Remove backgrounds instantly with AI"}),a.jsx(ge,{className:"mt-4",variant:"creative",onClick:t,children:"Try Now"})]}),a.jsxs(pe,{className:"bg-white/20 rounded-lg p-4 text-center border-0",children:[a.jsx(M,{className:"h-8 w-8 text-white mx-auto mb-2"}),a.jsx("h3",{className:"text-white font-semibold mb-2",children:"Export & Share"}),a.jsx("p",{className:"text-white/80 text-sm mb-4",children:"Export your creations in high quality"}),a.jsx(ge,{className:"mt-4",variant:"secondary",onClick:t,children:"Learn More"})]})]})}),a.jsxs("div",{className:"max-w-4xl mx-auto",children:[a.jsx("h2",{className:"text-2xl font-bold text-white text-center mb-6",children:"Try the Canvas Editor"}),a.jsx("div",{className:"bg-white/10 backdrop-blur-lg rounded-lg p-4",children:a.jsx(ze,{})})]})]})]})},Ie=()=>a.jsxs("div",{className:"min-h-screen bg-background",children:[a.jsx(fe,{}),a.jsx("main",{className:"container mx-auto",children:a.jsx(ze,{})})]}),De=[{title:"Home",to:"/",icon:a.jsx(w,{className:"h-4 w-4"}),page:a.jsx(Be,{})},{title:"Canvas Editor",to:"/editor",icon:a.jsx(b,{className:"h-4 w-4"}),page:a.jsx(Ie,{})}],$e=new B,Pe=()=>a.jsx(I,{client:$e,children:a.jsxs(me,{children:[a.jsx(ce,{}),a.jsx(u,{basename:"/don-create-code",children:a.jsx(m,{children:De.map(({to:e,page:t})=>a.jsx(h,{path:e,element:t},e))})})]})});W.createRoot(document.getElementById("root")).render(a.jsx(Pe,{}));
